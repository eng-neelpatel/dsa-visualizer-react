<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DSA Master Visualizer</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #e0e7ff, #dbeafe);
      min-height: 100vh;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { text-align: center; color: #312e81; margin-bottom: 40px; font-size: 32px; }
    .grid { display: grid; grid-template-columns: 1fr 3fr; gap: 24px; }
    .sidebar, .main {
      background: white;
      border-radius: 8px;
      box-shadow: 0 10px 15px rgba(0,0,0,0.1);
      padding: 24px;
    }
    .sidebar h2, .main h2 { margin-top: 0; color: #1e40af; }
    .topic-btn {
      display: block;
      width: 100%;
      padding: 12px;
      margin-bottom: 8px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
      background: #f3f4f6;
      color: #111827;
    }
    .topic-btn:hover { background: #e5e7eb; }
    .topic-btn.active { background: #6366f1; color: white; }
    .main > div { margin-bottom: 24px; }
    .viz { background: #eef2ff; border-radius: 6px; padding: 24px; min-height: 160px; display: flex; align-items: flex-end; justify-content: center; gap: 8px; }
    .bar { background: #6366f1; border-radius: 4px 4px 0 0; transition: all 0.3s; display: flex; flex-direction: column; align-items: center; }
    .bar-label { margin-top: 8px; font-size: 12px; font-weight: bold; }
    .node { font-family: monospace; font-size: 14px; }
    .controls { display: flex; justify-content: center; gap: 12px; margin-bottom: 16px; }
    button {
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }
    .btn-prev, .btn-next { background: #d1d5db; color: #111827; }
    .btn-prev:hover, .btn-next:hover { background: #b3b9c2; }
    .btn-prev:disabled, .btn-next:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-play { background: #6366f1; color: white; padding: 10px 32px; }
    .btn-play:hover { background: #4f46e5; }
    .btn-play.playing { background: #ef4444; }
    .progress { width: 100%; height: 8px; background: #d1d5db; border-radius: 4px; margin-bottom: 16px; overflow: hidden; }
    .progress-bar { height: 100%; background: #6366f1; transition: width 0.5s; }
    .steps-list {
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 6px;
      padding: 16px;
      max-height: 300px;
      overflow-y: auto;
    }
    .step-item {
      padding: 12px;
      margin-bottom: 8px;
      border-left: 4px solid #d1d5db;
      background: white;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .step-item:hover { background: #f0f4ff; border-left-color: #6366f1; }
    .step-item.active {
      background: #eef2ff;
      border-left-color: #6366f1;
      font-weight: bold;
    }
    .step-num { color: #6366f1; font-weight: bold; margin-right: 8px; }
    .step-action { color: #111827; }
    .step-desc { font-size: 12px; color: #6b7280; margin-top: 4px; }
    @media (max-width: 1024px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéØ DSA Master Visualizer</h1>
    <div class="grid">
      <div class="sidebar">
        <h2>Topics</h2>
        <div id="topics-list"></div>
      </div>
      <div class="main">
        <div>
          <h2 id="title">Select a Topic</h2>
          <p id="desc"></p>
          <div class="viz" id="viz"></div>
        </div>
        <div>
          <div class="controls">
            <button class="btn-prev" onclick="prevStep()" id="btn-prev">‚Üê Prev</button>
            <button class="btn-play" onclick="togglePlay()" id="btn-play">‚ñ∂ Play</button>
            <button class="btn-next" onclick="nextStep()" id="btn-next">Next ‚Üí</button>
          </div>
          <div class="progress"><div class="progress-bar" id="progress"></div></div>
          <h3 style="margin-top: 24px; margin-bottom: 12px; color: #1e40af;">Steps</h3>
          <div class="steps-list" id="steps-list"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const topics = [
      {
        id: 1,
        title: 'Bubble Sort',
        desc: 'Array: [5, 1, 4, 2, 8]',
        steps: [
          { a: 'Start', e: 'Initial array', d: [5, 1, 4, 2, 8] },
          { a: 'Swap 5 & 1', e: 'Compare and swap', d: [1, 5, 4, 2, 8] },
          { a: 'Swap 5 & 4', e: 'Continue', d: [1, 4, 5, 2, 8] },
          { a: 'Swap 5 & 2', e: 'Next pair', d: [1, 4, 2, 5, 8] },
          { a: 'No Swap 5 & 8', e: 'Already ordered', d: [1, 4, 2, 5, 8] },
          { a: 'Second Pass', e: 'Reorder', d: [1, 2, 4, 5, 8] },
          { a: 'Sorted!', e: 'Array is sorted', d: [1, 2, 4, 5, 8] }
        ]
      },
      {
        id: 2,
        title: 'Linked List',
        desc: 'A -> B -> C -> D',
        steps: [
          { a: 'Start at A', e: 'Head node', d: 'A -> B -> C -> D' },
          { a: 'Visit A', e: 'Current: A', d: '[A] -> B -> C -> D' },
          { a: 'Move to B', e: 'Follow pointer', d: 'A -> [B] -> C -> D' },
          { a: 'Move to C', e: 'Continue', d: 'A -> B -> [C] -> D' },
          { a: 'End at D', e: 'Last node', d: 'A -> B -> C -> [D]' }
        ]
      }
    ];

    let state = { topicId: 1, stepIdx: 0, playing: false };

    function renderTopics() {
      const html = topics.map(t => `<button class="topic-btn ${t.id === state.topicId ? 'active' : ''}" onclick="selectTopic(${t.id})">${t.title}</button>`).join('');
      document.getElementById('topics-list').innerHTML = html;
    }

    function renderSteps() {
      const topic = topics.find(t => t.id === state.topicId);
      const html = topic.steps.map((step, idx) => `
        <div class="step-item ${idx === state.stepIdx ? 'active' : ''}" onclick="goToStep(${idx})">
          <span class="step-num">Step ${idx + 1}:</span><span class="step-action">${step.a}</span>
          <div class="step-desc">${step.e}</div>
        </div>
      `).join('');
      document.getElementById('steps-list').innerHTML = html;
    }

    function selectTopic(id) {
      state.topicId = id;
      state.stepIdx = 0;
      state.playing = false;
      render();
    }

    function goToStep(idx) {
      state.stepIdx = idx;
      state.playing = false;
      render();
    }

    function render() {
      const topic = topics.find(t => t.id === state.topicId);
      const step = topic.steps[state.stepIdx];
      const total = topic.steps.length;
      const prog = ((state.stepIdx + 1) / total) * 100;

      document.getElementById('title').textContent = topic.title;
      document.getElementById('desc').textContent = topic.desc;
      document.getElementById('progress').style.width = prog + '%';

      // Visualization
      let viz = '';
      if (Array.isArray(step.d)) {
        viz = step.d.map(v => `<div class="bar" style="width:40px;height:${v*15}px"><span class="bar-label">${v}</span></div>`).join('');
      } else {
        viz = `<div class="node">${step.d}</div>`;
      }
      document.getElementById('viz').innerHTML = viz;

      // Buttons
      document.getElementById('btn-prev').disabled = state.stepIdx === 0;
      document.getElementById('btn-next').disabled = state.stepIdx === total - 1;
      document.getElementById('btn-play').textContent = state.playing ? '‚è∏ Pause' : '‚ñ∂ Play';
      document.getElementById('btn-play').classList.toggle('playing', state.playing);
      document.getElementById('btn-play').disabled = state.stepIdx === total - 1 && !state.playing;

      renderTopics();
      renderSteps();
    }

    function nextStep() {
      const topic = topics.find(t => t.id === state.topicId);
      if (state.stepIdx < topic.steps.length - 1) {
        state.stepIdx++;
        render();
      }
    }

    function prevStep() {
      if (state.stepIdx > 0) {
        state.stepIdx--;
        render();
      }
    }

    function togglePlay() {
      state.playing = !state.playing;
      render();
      if (state.playing) {
        const topic = topics.find(t => t.id === state.topicId);
        const interval = setInterval(() => {
          if (state.stepIdx < topic.steps.length - 1 && state.playing) {
            state.stepIdx++;
            render();
          } else {
            state.playing = false;
            clearInterval(interval);
            render();
          }
        }, 1500);
      }
    }

    render();
  </script>
</body>
</html>
